# Do not make changes to this file, as they will be overriden next time ./create-composefile is called!
services:
  zentoo-builder:
    image: localhost:5000/zentoo-stage3
    networks:
    - backend
    volumes:
    - /dev:/dev
    - /proc:/proc
    - /sys:/sys:ro
    - binpkgs:/var/cache/binpkgs
    - distfiles:/var/cache/distfiles
    - ebuilds:/var/db/repos/gentoo
    - stages:/mnt/stages:ro
    - kernels:/mnt/kernels
    tmpfs:
      - /mnt/temp
  zentoo-packer:
    image: localhost:5000/zentoo-stage3
    networks:
    - backend
    volumes:
    - /dev:/dev
    - /proc:/proc
    - /sys:/sys:ro
    - binpkgs:/var/cache/binpkgs:ro
    - distfiles:/var/cache/distfiles:ro
    - ebuilds:/var/db/repos/gentoo:ro
    - stages:/mnt/stages
    - kernels:/mnt/kernels:ro
    tmpfs:
      - /mnt/temp
networks:
#  frontend:
#    driver: overlay
  backend:
    driver: overlay

volumes:
  distfiles:
    driver: local
  ebuilds:
    driver: local
  binpkgs:
    driver: local
  stages:
    driver: local
  kernels:
    driver: local
